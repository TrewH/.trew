##### Terminal & colors ########################################################
# Prefer tmux-256color if available; otherwise fall back to xterm-256color
if-shell 'infocmp -x tmux-256color >/dev/null 2>&1' \
  'set -g default-terminal "tmux-256color"' \
  'set -g default-terminal "xterm-256color"'

# Enable truecolor passthrough once (use RGB on modern tmux; Tc for older)
set -as terminal-overrides ",*:RGB"
# If you ever hit an older tmux/term, you can add:  set -as terminal-overrides ",*:Tc"

##### Prefix & basics ##########################################################
unbind C-b
set -g prefix C-a
bind C-a send-prefix

set -g mouse on
set -g history-limit 100000
set -g escape-time 0
set -g focus-events on
setw -g mode-keys vi
setw -g aggressive-resize on

##### Splits & panes ###########################################################
unbind '"'
unbind %
bind | split-window -h
bind - split-window -v

bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Quick reload of this config
bind r source-file ~/.tmux.conf \; display-message "tmux.conf reloaded"

##### Status bar ###############################################################
set -g status-style bg=colour234,fg=white
set -g status-left  " #S "
set -g status-right "#{username} | %Y-%m-%d %H:%M "

##### Copy mode & clipboard (WSL) ##############################################
# Use Windows clipboard for yanking in copy-mode
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "clip.exe"
set -s set-clipboard on
